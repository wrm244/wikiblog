---
id: 线性表进阶
slug: /1线性表
title: 1 线性表
author: RiverMountain  
date: 2023/06/22
tags: [C,数据结构C,C线性表]
keywords: [C,数据结构C,C线性表]
description: 数据结构进阶线性表
last_update:
  date: 2023/06/22
---

:::tip
在编程的时候要把自己的编写的代码置身于开发大型项目的子模块视角中，有利于提高自己宏观解决问题的能力，``main``只是你的测试。
:::

:::note
线性表定义：零个或者多个数据元素的有限序列。
:::

线性表元素的个数$n(n≥0)$定义为线性表的长度，当$n=0$时，称为空表。

对于一个非空的线性表或者线性结构，具有以下特点：
- 存在唯一的一个被称作“第一个”的数据元素。
- 存在唯一的一个被称作“最后一个”的数据元素。
- 除了第一个外，结构中的每个数据元素都有一个前驱。
- 除了最后一个外，结构中的每个数据元素都有一个后继。

## 线性表顺序存储
>**线性表的顺序存储结构**是指用一段地址连续的存储单元依次存储线性表的数据元素。

![](assets/1%20线性表/image-20230622214146.png)

### 线性表顺序存储结构

```c title="存储结构"
/* datatype类型根据实际情况而定，这里假设为int */
typedef int datatype;

typedef struct node_st{
    datatype *data; // 数组存储数据元素，最大值为MAXSIZE。
    int last; //线性表当前长度
}sqlist;

```
### 顺序存储结构常用操作
#### 初始化线性表
```c title="初始化方法1-指针函数返回"
/**
 * @description: 指针函数初始化顺序线性表
 * @param {int} n
 * @return {sqlist} *
 */
sqlist *sqlist_create(int n)
{
    sqlist *me = NULL;
    //初始化存储空间
    me = malloc(sizeof(*me));
    //初始化线性表空间，按照给定的长度开辟
    me->data = malloc(sizeof(datatype)*n);
    if (me == NULL)
        return NULL;
    //线性表当前长度初始化为-1
    me->last = -1;
    return me;
}
```

```c title="初始化方法2-指针函数返回"
/**
 * @description: 不带返回值初始化顺序线性表，这里双指针**ptr的意思是对指针的地址进行改变
 * @param {sqlist} **ptr
 * @param {int} n
 * @return {*}
 */
void sqlist_create1(sqlist **ptr,int n)

{
    *ptr = malloc(sizeof(**ptr));
    (*ptr)->data = malloc(sizeof(datatype)*n);
    if (*ptr == NULL)
        return;
    (*ptr)->last = -1;
    return;
}
```

以上两种方式都可以对顺序线性表进行初始化，关于定义函数的注意事项参见：[指针与函数](../指针与函数.md) 的内存泄漏章节。

### 代码部分
```c title="sqlist.h"
/************************************************
* @File name: sqlist.h
* @Author: RiverMountain
* @Version: 1.0
* @Date: 2023-6-22
* @Description: 这份头文件是对。
**********************************************/

#ifndef sqlist_H__
#define sqlist_H__
#define DATASIZE 1024
typedef int datatype;

typedef struct node_st{
    datatype *data;
    int last;
}sqlist;

sqlist *sqlist_create(int);
void sqlist_create1(sqlist **,int);
//这里双指针的意思是对指针的地址进行改变
int sqlist_insert(sqlist *,int i,datatype *);
int sqlist_delete(sqlist *,int i);
int sqlist_find(sqlist *,datatype *);
int sqlist_isempty(sqlist *);
int sqlist_setempty(sqlist *);
int sqlist_getnum(sqlist *);
int sqlist_union(sqlist *,sqlist*);
void sqlist_display(sqlist *);
int sqlist_destroy(sqlist *);
#endif
```

```c title="sqlist.c"
#include <stdio.h>
#include <stdlib.h>
#include "sqlist.h"

/**
 * @description: 指针函数初始化顺序线性表
 * @param {int} n
 * @return {sqlist} *
 */
sqlist *sqlist_create(int n)
{
    sqlist *me = NULL;
    me = malloc(sizeof(*me));
    me->data = malloc(sizeof(datatype)*n);
    if (me == NULL)
        return NULL;
    me->last = -1;
    return me;
}

/**
 * @description: 不带返回值初始化顺序线性表，这里双指针**ptr的意思是对指针的地址进行改变
 * @param {sqlist} **ptr
 * @param {int} n
 * @return {*}
 */
void sqlist_create1(sqlist **ptr,int n)

{
    *ptr = malloc(sizeof(**ptr));
    (*ptr)->data = malloc(sizeof(datatype)*n);
    if (*ptr == NULL)
        return;
    (*ptr)->last = -1;
    return;
}

/**
 * @description: 对线性表的插入
 * @param {sqlist} *me
 * @param {int} i
 * @param {datatype} *data
 * @return {*}
 */
int sqlist_insert(sqlist *me, int i, datatype *data)
{
    int j;
    if (me->last == DATASIZE - 1)
        return -1;
    if (i < 0 || i > me->last + 1)
        return -2;

    for (j = me->last; i <= j; j--)
        me->data[j + 1] = me->data[j];
    me->data[i] = *data;
    me->last++;
    return 0;
}
/**
 * @description: 线性表某个i位置元素进行删除
 * @param {sqlist} *me
 * @param {int} i
 * @return {*}
 */
int sqlist_delete(sqlist *me, int i)
{
    int j;
    if (i < 0 || i > me->last)
        return -1;
    for (j = i + 1; j <= me->last; j++)
        me->data[j - 1] = me->data[j];
    me->last--;
    return 0;
}
/**
 * @description: 查找匹配元素的位置下标
 * @param {sqlist} *me
 * @param {datatype} *data
 * @return {int}
 */
int sqlist_find(sqlist *me, datatype *data)
{
    int i;
    if (sqlist_isempty == 0)
        return -1;
    for (i = 0; i < me->last; i++)
        if (me->data[i] == *data)
            return i;
    return -2;
}
/**
 * @description: 判断线性表是否为空
 * @param {sqlist} *me
 * @return {int}
 */
int sqlist_isempty(sqlist *me)
{
    if (me->last = -1)
        return 0;
    return -1;
}
/**
 * @description: 清空线性表
 * @param {sqlist} *me
 * @return {int}
 */
int sqlist_setempty(sqlist *me)
{
    me->last = -1;
    return 0;
}
/**
 * @description: 查看线性表长度
 * @param {sqlist} *me
 * @return {int}
 */
int sqlist_getnum(sqlist *me)
{
    return (me->last + 1);
}

/**
 * @description: 组合两个线性表返回给list1
 * @param {sqlist} *list1
 * @param {sqlist} *list2
 * @return {int}
 */
int sqlist_union(sqlist *list1, sqlist *list2)
{
    int i = 0;
    while (i <= list2->last)
    {
        if (sqlist_find(list1, &list2->data[i]) < 0)
        {
            sqlist_insert(list1,i,&list2->data[i]);
        }
        i++;
    }
}

/**
 * @description: 显示线性表内容
 * @param {sqlist} *me
 * @return {void}
 */
void sqlist_display(sqlist *me)
{
    int i;
    if (me->last == -1)
        return;
    for (i = 0; i <= me->last; i++)
        printf("%d ", me->data[i]);
    printf("\n");
    return;
}
/**
 * @description: 销毁线性表内容
 * @param {sqlist} *me
 * @return {int} 成功返回0
 */
int sqlist_destroy(sqlist *me)
{
    free(me);
    return 0;
}
```

```c title="main"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "sqlist.h"
int main()
{
    int i,err;
    sqlist *list= NULL,*list1= NULL;
    datatype arr[]={12,23,34,45,56};
    datatype arr1[]={89,45,34,67,43,56,23};
    //list = sqlist_create();
    sqlist_create1(&list,6);
    if(list == NULL)
    {
        fprintf(stderr,"sqlist_create() failed!\n");
        exit(1);
    }
    
    list1 = sqlist_create(7);
    if(list1 == NULL)
    {
        fprintf(stderr,"sqlist_create() failed!\n");
        exit(1);
    }

    for(i = 0;i <sizeof(arr)/sizeof(*arr);i++)
    {
        if((err=sqlist_insert(list,0,&arr[i]))!=0)
        {
            if(err == -1)
                fprintf(stderr,"The sqlist is full!\n");
            else if(err ==-2)
                fprintf(stderr,"The pos you want to insert is wrong\n");
                else
                    fprintf(stderr,"Error!\n");
            exit(1);
        }
    }

    for(i = 0;i <sizeof(arr1)/sizeof(*arr1);i++)
    {
        if((err=sqlist_insert(list1,0,&arr1[i]))!=0)
        {
            if(err == -1)
                fprintf(stderr,"The sqlist is full!\n");
            else if(err ==-2)
                fprintf(stderr,"The pos you want to insert is wrong\n");
                else
                    fprintf(stderr,"Error!\n");
            exit(1);
        }
    }
    sqlist_display(list);
    sqlist_display(list1);
    //sqlist_destroy(list);
    //sqlist_destroy(list1);
    sqlist_union(list,list1);
    sqlist_display(list);
    exit(0);
}
```